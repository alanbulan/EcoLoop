{"openapi":"3.1.0","info":{"title":"Green Recycle Backend","version":"0.1.0"},"paths":{"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Wx Login","description":"Login with WeChat Code (jscode2session).\nIf user doesn't exist, auto-register.","operationId":"wx_login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WxLoginSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/materials":{"get":{"summary":"Get Materials","operationId":"get_materials_api_v1_materials_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Material"},"type":"array","title":"Response Get Materials Api V1 Materials Get"}}}}}}},"/api/v1/orders":{"get":{"summary":"Get Orders","operationId":"get_orders_api_v1_orders_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Order"},"type":"array","title":"Response Get Orders Api V1 Orders Get"}}}}}},"post":{"summary":"Create Order","operationId":"create_order_api_v1_orders_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/assign":{"put":{"summary":"Assign Order","operationId":"assign_order_api_v1_orders__order_id__assign_put","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignOrderSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/orders/{order_id}/complete":{"put":{"summary":"Complete Order","operationId":"complete_order_api_v1_orders__order_id__complete_put","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteOrderSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AssignOrderSchema":{"properties":{"collector_id":{"type":"integer","title":"Collector Id"}},"type":"object","required":["collector_id"],"title":"AssignOrderSchema"},"CompleteOrderSchema":{"properties":{"actual_weight":{"type":"number","title":"Actual Weight"},"impurity_percent":{"type":"number","title":"Impurity Percent","default":0.0}},"type":"object","required":["actual_weight"],"title":"CompleteOrderSchema"},"CreateOrderSchema":{"properties":{"user_id":{"type":"integer","title":"User Id"},"material_id":{"type":"integer","title":"Material Id"},"address":{"type":"string","title":"Address"},"estimated_weight":{"type":"number","title":"Estimated Weight","default":0.0}},"type":"object","required":["user_id","material_id","address"],"title":"CreateOrderSchema"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginResponse":{"properties":{"user_id":{"type":"integer","title":"User Id"},"openid":{"type":"string","title":"Openid"},"is_new":{"type":"boolean","title":"Is New"}},"type":"object","required":["user_id","openid","is_new"],"title":"LoginResponse"},"Material":{"properties":{"id":{"type":"integer","maximum":2147483647.0,"minimum":-2147483648.0,"title":"Id"},"name":{"type":"string","maxLength":100,"title":"Name"},"category":{"type":"string","maxLength":50,"title":"Category"},"current_price":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Current Price"},"market_price":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Market Price"},"trend":{"anyOf":[{"type":"string","maxLength":10},{"type":"null"}],"title":"Trend","default":"stable"},"unit":{"anyOf":[{"type":"string","maxLength":10},{"type":"null"}],"title":"Unit","default":"kg"}},"additionalProperties":false,"type":"object","required":["id","name","category","current_price","market_price"],"title":"Material"},"Order":{"properties":{"id":{"type":"integer","maximum":2147483647.0,"minimum":-2147483648.0,"title":"Id"},"address":{"type":"string","maxLength":255,"title":"Address"},"status":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Status","default":"pending"},"unit_price_snapshot":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Unit Price Snapshot","nullable":true},"weight_actual":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Weight Actual","nullable":true},"impurity_deduction_percent":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Impurity Deduction Percent","default":0.0},"applied_bonus_amount":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Applied Bonus Amount","default":0.0},"amount_final":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Amount Final","nullable":true},"date":{"type":"string","format":"date-time","title":"Date","readOnly":true}},"additionalProperties":false,"type":"object","required":["id","address","date"],"title":"Order"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WxLoginSchema":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"WxLoginSchema"}}}}